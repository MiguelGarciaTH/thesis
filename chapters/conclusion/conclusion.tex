\chapter{Conclusion}
\label{chap:conclusion}

\section{Summary of the Results}
\system addresses the long-standing open problem of evaluating, selecting, and managing the diversity of a BFT system to make it resilient to malicious adversaries.
Our work focuses on two fundamental issues: how to select the best replicas to run together given the current threat landscape, and what is the performance overhead of running a diverse BFT system in practice.
Our results open many avenues for future work on this topic.

\paragraph{OS vulnerability Study}
The main results could be summarized as follows:
\begin{enumerate}
\item In most diverse \gls{os} configurations, significant  benefits in security could be observed: a low number of vulnerabilities were found to affect more than one \gls{os};

\item The number of vulnerabilities that affect more than one \gls{os} depends on how diverse the configuration is: they are higher for OSes from the same family (e.g., BSD) but very low (and in many cases zero) in OSes from different families (e.g., BSD and Windows);

\item We presented several strategies for system designers to choose most diverse \glspl{os} using \gls{nvd} data depending on whether they: consider all common vulnerabilities as being of equal importance; place greater emphasis on more recent common vulnerabilities (and hence wish to minimise the number of those); are primarily interested in the common vulnerabilities being reported less frequently in calendar time (which would allow them more time to respond to them). Surprisingly, for our dataset, all three strategies delivered the same best combination of four \glspl{os} for an intrusion-tolerant configuration (four being the usual number of systems needed to tolerate a Byzantine failure in a replicated system), which is: \textit{\{OpenBSD, Debian, Solaris, Windows2003\}}.

\end{enumerate}



\section{Future Work}

\textbf{Pretest replicas:}
Run a battery of tests (like Fuzzing, vulnerability detectors etc) before the system is running.

\textbf{Use vulnerable clone decttors on Opens source software to aggravete pairs with more clones} with dependcy graphs and autidting tools~\cite{Kim:2017}

\textbf{Test diversity agains automatic attacks, sometimes it may not be perfact, as the attacks we expect to see are APTs, however the idea is to verify if it takes more time to attack a replicated system with diversity}~\cite{Hu:2015}

\textbf{Vulnreabilities in the black market as a inditicar of severity}~\cite{Allodi:2014}.

\textbf{Virtualization technology:}
\system paid a performance penalty due to the limitations of the virtualization platform we used (VirtualBox).
VirtualBox was selected because it was the platform we could run more OSes.
Therefore its use enabled \system to support 17 different OSes for running BFT systems.
It would be great to have a VM technology capable of supporting all existing OSes without the resource limitations we experienced.

\textbf{Distributed control plane:}
As in previous works~\cite{Roeder:2010,Platania:2014}, our current design for \system considers a centralized trusted control plane that analyzes OSINT and orchestrates replica set reconfigurations.
It would be desirable to have a distributed version of such control plane, not only for improving its dependability but also to support the existence of multi-domain applications, such as blockchain platforms.

\textbf{Trusted components:}
Our prototype implements the LTU as a trusted component isolated from the rest of the replica in a VM, as many works on hybrid BFT~\cite{Veronese:2013,Roeder:2010,Platania:2014,Sousa:2010,Distler:2011}.
The recent popularization of trusted computing technologies such as Intel SGX~\cite{sgx}, and its use for implementing efficient BFT replication~\cite{Behl:2017}, open interesting possibilities for using novel hardware to support services like \system on bare metal.

\textbf{Integration with other sensors:}
\system monitors only five security data feeds on the internet looking for vulnerabilities, exploits, and patches in the OSes it manages, but it could be extended to monitor other indicators of compromise (e.g., IP black lists) extracted from a much richer set of sources~\cite{Liao:2016,Sabottke:2015}.
Similarly, \system can be extended to additionally use the outputs of IDSes to assess the BFT system behavior and trigger replica reconfigurations in case of need.

\textbf{Diversity-aware replication:}
The evaluation of BFT-SMaRt on top of \system shows that different replica set configurations can impact on the performance of applications, mostly due to the performance heterogeneity of the different OSes.
It would be interesting to consider protocols in which this heterogeneity is taken into account.
For example, the leader could be allocated in the fastest replica, or weighted-replication protocols such as WHEAT~\cite{Sousa:2015} could be used to assign higher weights to the replicas running in faster replicas.

